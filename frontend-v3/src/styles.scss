// ===========================================
// Global Styles - Linve Frontend
// ===========================================

// Fallbacks para tokens usados pelos web components (evita NaN em cálculos iniciais)
:root {
  --icon-size-2x: 16px;
  --icon-size-5x: 24px;
  --icon-size-8x: 40px;
}

// Smooth scroll behavior
html {
  scroll-behavior: smooth;
}

// Dark mode root variables - penetram Shadow DOM
html.dark-mode,
:root.dark-mode,
body.dark-mode {
  // Variáveis que os web components leem
  --background-light: #16213e !important;
  --color-light: #FFFFFF !important;
  --color-light-rgb: 255, 255, 255 !important;
  --interactive-light: #C5D4EB !important;
  --interactive-light-rgb: 197, 212, 235 !important;
  --border-color-alternative: #3a4a6b !important;

  // Forçar botão primary com azul escuro (não usar --interactive-light)
  .br-button.primary,
  .br-button[primary],
  .br-button.is-primary {
    background-color: #1351B4 !important;
    color: #FFFFFF !important;
  }

  // Cores de estado - usadas pelos componentes internamente
  --danger: #E83D3D !important;
  --danger-alternative: rgba(232, 61, 61, 0.15) !important;
  --success: #168821 !important;
  --success-alternative: rgba(22, 136, 33, 0.15) !important;
  --warning: #FFCD07 !important;
  --info: #155BCB !important;

  // Message text colors
  --message-text: #FFFFFF !important;

  // Forçar borda vermelha em inputs com erro
  br-input[state="danger"],
  .br-input[state="danger"],
  .br-input.danger,
  .br-input[data-danger] {
    input, textarea, select {
      border-color: #E83D3D !important;
      border-width: 2px !important;
    }
  }
}

// ===========================================
// Dark Mode Support
// ===========================================
// GovBR DS já define variáveis --*-light e --*-dark
// Aqui fazemos o override das variáveis principais quando dark-mode está ativo

body {
  // Transição suave entre temas
  transition: background-color 0.3s ease, color 0.3s ease;
}

body.dark-mode {
  // Core colors
  --background: var(--background-dark, #071D41);
  --color: var(--color-dark, #FFFFFF);
  --interactive: var(--interactive-dark, #C5D4EB);
  --visited: var(--visited-dark, #C5D4EB);
  --hover: var(--hover-dark, 0.45);
  --pressed: var(--pressed-dark, 0.65);
  --focus-color: var(--focus-color-dark, #FFDD57);
  --focus: var(--focus-color);

  // RGB variants for opacity
  --background-rgb: var(--background-dark-rgb, 7, 29, 65);
  --color-rgb: var(--color-dark-rgb, 255, 255, 255);
  --interactive-rgb: var(--interactive-dark-rgb, 197, 212, 235);

  // IMPORTANTE: Sobrescrever variáveis *-light que os componentes usam hardcoded
  --background-light: #16213e;
  --color-light: #FFFFFF;
  --color-light-rgb: 255, 255, 255;
  --interactive-light: #C5D4EB;
  --interactive-light-rgb: 197, 212, 235;
  --hover-light: 0.45;
  --pressed-light: 0.65;
  --focus-color-light: #FFDD57;
  --border-color-alternative: #3a4a6b;

  // Cores de estado para dark mode
  --danger: #E83D3D;
  --danger-alternative: rgba(232, 61, 61, 0.15);
  --success: #168821;
  --success-alternative: rgba(22, 136, 33, 0.15);
  --warning: #FFCD07;
  --warning-alternative: rgba(255, 205, 7, 0.15);
  --info: #155BCB;
  --info-alternative: rgba(21, 91, 203, 0.15);

  // Gray scale inversa para dark mode
  --gray-2: #1a1a2e;
  --gray-5: #16213e;
  --gray-10: #0f3460;
  --gray-20: #1a1a2e;
  --gray-60: #a0a0a0;
  --gray-70: #c0c0c0;
  --gray-80: #e0e0e0;

  // Pure colors
  --pure-0: #FFFFFF;
  --pure-100: #000000;

  // Apply to body
  background-color: var(--background-dark, #071D41);
  color: var(--color-dark, #FFFFFF);

  // Cards e superfícies
  .br-card {
    background-color: var(--gray-5, #16213e);
    border-color: var(--gray-10, #0f3460);
  }

  // Tables
  .br-table,
  table {
    --background: var(--gray-5, #16213e);
    --color: var(--pure-0, #FFFFFF);
  }

  // Menu
  .br-menu {
    --background: var(--gray-5, #16213e);
    --color: var(--pure-0, #FFFFFF);
  }

  // Dividers
  .br-divider,
  hr {
    border-color: var(--gray-20, #1a1a2e);
  }

  // Text utilities
  .text-base {
    color: var(--gray-70, #c0c0c0);
  }

  // Títulos
  h1, h2, h3, h4, h5, h6 {
    color: var(--pure-0, #FFFFFF);
  }

  // Textos auxiliares
  .text-secondary,
  .text-muted {
    color: var(--gray-60, #a0a0a0) !important;
  }

  // Links
  a {
    color: var(--interactive-dark, #C5D4EB);

    &:hover {
      color: var(--pure-0, #FFFFFF);
    }
  }
}

// ===========================================
// Dark Mode - Estilos para Web Components GovBR DS
// ===========================================
body.dark-mode {
  // Secondary button
  br-button[emphasis="secondary"] .br-button,
  br-button[emphasis="secondary"] button,
  .br-button.secondary,
  .br-button[secondary] {
    background-color: transparent !important;
    color: #FFFFFF !important;
    border: 1px solid #FFFFFF !important;

    &:hover {
      background-color: rgba(255, 255, 255, 0.15) !important;
    }
  }

  // Primary button - azul escuro com bom contraste
  br-button[emphasis="primary"] .br-button,
  br-button[emphasis="primary"] button,
  .br-button.primary,
  .br-button[primary] {
    background-color: #1351B4 !important;
    color: #FFFFFF !important;

    &:hover {
      background-color: #0D3A8C !important;
    }
  }

  // Input component - labels
  br-input .input-label,
  br-input label,
  .br-input .input-label,
  .br-input label {
    color: #FFFFFF !important;
  }

  // Input component - campos
  br-input input,
  br-input textarea,
  br-input select,
  .br-input input,
  .br-input textarea,
  .br-input select {
    background-color: #16213e !important;
    color: #FFFFFF !important;
    border-color: #3a4a6b !important;

    &::placeholder {
      color: #a0a0a0 !important;
    }

    &:focus {
      border-color: var(--blue-warm-vivid-50, #2670E8) !important;
      outline-color: var(--blue-warm-vivid-50, #2670E8) !important;
    }
  }

  // Botão dentro do input (ex: mostrar senha)
  br-input .br-button,
  br-input button,
  .br-input .br-button,
  .br-input button:not([type="submit"]) {
    color: #a0a0a0 !important;

    &:hover {
      color: #FFFFFF !important;
      background-color: rgba(255, 255, 255, 0.1) !important;
    }
  }

  // Checkbox
  br-checkbox label,
  .br-checkbox label {
    color: #FFFFFF !important;
  }

  br-checkbox .checkmark,
  .br-checkbox .checkmark {
    border-color: #3a4a6b !important;
    background-color: #16213e !important;
  }

  // Message - estado danger
  br-message[state="danger"],
  .br-message[state="danger"],
  .br-message.danger,
  .br-message[danger] {
    --message-background: #E83D3D !important;
    --feedback-background: #E83D3D !important;
    --message-text: #FFFFFF !important;
    background: #E83D3D !important;

    .content {
      color: #FFFFFF !important;
    }

    .icon {
      color: #FFFFFF !important;
    }
  }

  // Message - estado success
  br-message[state="success"],
  .br-message[state="success"],
  .br-message.success,
  .br-message[success] {
    --message-background: #168821 !important;
    --feedback-background: #168821 !important;
    --message-text: #FFFFFF !important;
    --success: #FFFFFF !important;
    --green-cool-vivid-50: #FFFFFF !important;
    background: #168821 !important;
    color: #FFFFFF !important;

    .content {
      color: #FFFFFF !important;
    }

    .icon {
      color: #FFFFFF !important;
    }
  }

  // Fix para ícones dentro de br-message no dark mode
  // Forçar cor branca nos ícones de mensagem usando variáveis CSS que penetram Shadow DOM
  br-message {
    --icon-color: #FFFFFF !important;
    --text-color: #FFFFFF !important;

    &[state="success"] {
      --success: #FFFFFF !important;
      --green-cool-vivid-50: #FFFFFF !important;
      color: #FFFFFF !important;

      .icon, .content, br-icon, iconify-icon {
        color: #FFFFFF !important;
      }
    }

    &[state="danger"] {
      --danger: #FFFFFF !important;
      --red-vivid-50: #FFFFFF !important;
      color: #FFFFFF !important;

      .icon, .content, br-icon, iconify-icon {
        color: #FFFFFF !important;
      }
    }

    &[state="warning"] {
      --warning: #333333 !important;
    }

    &[state="info"] {
      --info: #FFFFFF !important;
      --blue-warm-vivid-50: #FFFFFF !important;
      color: #FFFFFF !important;

      .icon, .content, br-icon, iconify-icon {
        color: #FFFFFF !important;
      }
    }
  }

  // Forçar cor do ícone via CSS global para iconify-icon
  br-message[state="success"] iconify-icon,
  br-message[state="danger"] iconify-icon,
  br-message[state="info"] iconify-icon {
    color: #FFFFFF !important;
  }

  // Feedback inline (usado com is-feedback)
  .feedback,
  .feedback.danger,
  .feedback[danger],
  .feedback.is-danger {
    background: #E83D3D !important;
    color: #FFFFFF !important;

    * {
      color: #FFFFFF !important;
    }
  }

  .feedback.success,
  .feedback[success],
  .feedback.is-success {
    background: #168821 !important;
    color: #FFFFFF !important;

    * {
      color: #FFFFFF !important;
    }
  }

  // Input com estado danger - borda vermelha
  br-input[state="danger"] input,
  .br-input[state="danger"] input,
  .br-input.danger input,
  .br-input[data-danger] input {
    border-color: #E83D3D !important;
    border-width: 2px !important;
  }

  // Input com estado success - borda verde
  br-input[state="success"] input,
  .br-input[state="success"] input,
  .br-input.success input,
  .br-input[data-success] input {
    border-color: #168821 !important;
    border-width: 2px !important;
  }

  // Table dark mode
  br-table-header-row {
    --background-alternative: #0f3460 !important;
  }

  br-table-header-cell {
    --color: #FFFFFF !important;
    --table-th-background: #0f3460 !important;
  }

  br-table-row {
    --background: #16213e !important;
    --table-background: #16213e !important;
  }

  br-table-cell {
    --color: #FFFFFF !important;
    --table-color: #FFFFFF !important;
    --table-border-color: #1a1a2e !important;
  }
}
